{"version":3,"sources":["directives/resize-frame.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;YASA;gBAIC,qBAAoB,EAAc;oBAAd,OAAE,GAAF,EAAE,CAAY;oBACjC,IAAI,CAAC,GAAG,GAAG,EAAE,CAAC,aAAa,CAAC;gBAC7B,CAAC;gBAED,4BAAM,GAAN,UAAO,CAAC;oBACP,IAAI,CAAC,QAAQ,EAAE,CAAC;gBACjB,CAAC;gBAED,8BAAQ,GAAR;oBACC,IAAI,eAAe,GAAG,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,WAAW,CAAC;oBAEjE,IAAI,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,QAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;oBAClE,EAAE,CAAC,CAAC,IAAI,CAAC;wBAAC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC;oBAE5C,IAAI,KAAK,GAAG,eAAe,GAAG,CAAC,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC,CAAC;oBACpD,EAAE,CAAC,CAAC,KAAK,IAAI,CAAC,CAAC,CAAC,CAAC;wBAChB,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,QAAQ,CAAC,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,+BAA+B,CAAC,CAAC;wBAC5F,MAAM,CAAC,IAAI,CAAC;oBACb,CAAC;oBAED,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,QAAQ,CAAC,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,oBACjD,IAAI,CAAC,SAAS,oCACJ,KAAK,qEAEP,CAAC,CAAC;oBAEpB,EAAE,CAAA,CAAC,IAAI,CAAC;wBAAC,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,WAAW,CAAC,CAAC;oBAEjD,EAAE,CAAC,CAAC,IAAI,CAAC;wBAAC,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,OAAO,EAAE,cAAW,IAAI,CAAC,YAAY,GAAG,KAAK,GAAG,EAAE,QAAI,CAAC,CAAA;gBACxF,CAAC;gBAxCF;oBAAC,gBAAS,CAAC;wBACV,QAAQ,EAAE,gBAAgB;wBAC1B,IAAI,EAAE;4BACL,iBAAiB,EAAE,kBAAkB;4BACrC,QAAQ,EAAE,gBAAgB;yBAC1B;qBACD,CAAC;;+BAAA;gBAoCF,kBAAC;YAAD,CAnCA,AAmCC,IAAA;YAnCD,qCAmCC,CAAA","file":"directives/resize-frame.js","sourcesContent":["import {Directive, ElementRef} from 'angular2/core';\n\n@Directive({ \n\tselector: 'iframe[resize]',\n\thost: {\n\t\t'(window:resize)': 'onResize($event)',\n\t\t'(load)': 'onLoad($event)'\n\t}\n})\nexport class ResizeFrame {\n\tprivate _el: HTMLElement;\n\tprivate pageWidth: number;\n\n\tconstructor(private el: ElementRef) {\n\t\tthis._el = el.nativeElement;\n\t}\n\n\tonLoad(e) {\n\t\tthis.onResize();\n\t}\n\n\tonResize() {\n\t\tvar container_width = document.querySelector('main').offsetWidth;\n\n\t\tvar page = this._el.contentWindow.document.querySelector('.page');\n\t\tif (page) this.pageWidth = page.offsetWidth;\n\n\t\tvar ratio = container_width / (this.pageWidth + 50);\n\t\tif (ratio >= 1) {\n\t\t\tthis._el.contentWindow.document.body.setAttribute('style', `transform: none; width: 100%;`);\n\t\t\treturn true;\n\t\t}\n\n\t\tthis._el.contentWindow.document.body.setAttribute('style', `\n\t\t\twidth: ${this.pageWidth}px;\n\t\t\ttransform: scale(${ratio});\n\t\t\ttransform-origin: 0px 0px 0px;\n\t\t\toverflow: hidden`);\n\n\t\tif(page) page.setAttribute('style', `margin:0;`);\n\n\t\tif (page) this._el.setAttribute('style', `height: ${page.offsetHeight * ratio + 11}px`)\n\t}\n\n}"],"sourceRoot":"/source/"}