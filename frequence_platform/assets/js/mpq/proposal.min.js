!function(a){function b(){a("#custom_regions_multiselect").select2("data",null),a.ajax({url:"/mpq_v2/remove_selected_custom_regions",dataType:"json",async:!0,type:"POST",success:function(a){0==a.is_success&&vl_show_ajax_response_data_errors(a,"failed to remove selected custom regions")},error:function(a,b,c){vl_show_jquery_ajax_error(a,b,c)}})}function c(){var b=a("#set_zips").val(),c=b.replace(/,/g," "),d=a.trim(c),e=d.split(/\s+/);return e}function d(a){for(var b=a.length,c=!0,d=0;b>d;d++){var e=a[d];if(-1!=e.search(/\D/)||5!=e.length){c=!1;break}}return c}function e(a){console.log(a);for(var b="",c=a.length,d=c-1,e=0;c>e;e++){var f=a[e];b+=e!=d?f+", ":f}document.getElementById("set_zips").value=b}function f(e){var f=!1;"custom_regions"==e?f=!0:b();var g=c(),h=d(g);if(h&&!(g.length<=0)){var i=JSON.stringify(g),l=document.getElementById("iframe-map"),m=l.contentWindow?l.contentWindow:l.contentDocument,n=0,o=0;"undefined"!=typeof m&&"undefined"!=typeof m.get_map_center_latitude&&(n=m.get_map_center_latitude(),o=m.get_map_center_longitude()),j();var p=!0;g.length>=1e3&&g.length<=4e3?p=window.confirm("Warning: you have selected "+g.length+" zip codes. This may take a long time or even freeze your browser. Are you sure you want to continue?"):g.length>4e3&&(window.alert("Warning: You've entered too many zip codes. Please comment in the 'Notes' section below that you have more zip codes and a representative will contact you to add them to your request."),p=!1),p?a.ajax({url:"/mpq/save_zips",dataType:"json",success:function(a,b,c){if(vl_is_ajax_call_success(a)){var d="<iframe id='iframe-map' src='/mpq/map' seamless='seamless' height='100%' width='100%;' overflow:'hidden' frameborder='0' scrolling='no' allowtransparency='true'></iframe>";document.getElementById("region-links").innerHTML="",document.getElementById("region-links").innerHTML=d}else k(),vl_show_ajax_response_data_errors(a,"saving map zips data failed")},error:function(a,b,c){k(),vl_show_jquery_ajax_error(a,b,c)},async:!0,type:"POST",data:{zips_json:i,map_center_latitude:n,map_center_longitude:o,is_custom_regions:f}}):k()}}function g(a,b,c){return"numeric"==a?1==isNaN(b)?(alert(b+" for "+c+" is not "+a),!1):!0:void 0}function h(c){if(b(),1==g("numeric",document.getElementById("radius").value,"Radius Input")){var d=document.getElementById("address").value;if(""==d)document.getElementById("address").value=d;else{var f;K.geocode({address:d},function(b,d){if(d==google.maps.GeocoderStatus.OK)if(f=document.getElementById("region_type").value+"_"+document.getElementById("radius").value+"_"+b[0].geometry.location.lat()+"_"+b[0].geometry.location.lng()+"_",void 0!==c&&""!==savedZips){var g="<iframe id='iframe-map' src='/mpq/map' seamless='seamless' height='100%' width='100%;' overflow:'hidden' frameborder='0' scrolling='no' allowtransparency='true'></iframe>";document.getElementById("region-links").innerHTML="",document.getElementById("region-links").innerHTML=g,document.getElementById("sliderBodyContent_geo").innerHTML="",document.getElementById("radius").value="",document.getElementById("address").value=""}else{j();var h=!0;if(a("#radius").val()>=100&&a("#radius").val()<300?h=window.confirm("Warning: you have selected a large radius. This may take a long time or even freeze your browser. Are you sure you want to continue?"):a("#radius").val()>=300&&(window.alert("Warning: your radius is too large. Please enter a smaller radius value or leave a comment in the notes section below with the area you would like to target."),h=!1),h){a.ajax({url:"/mpq/save_geo_search/"+f,dataType:"json",async:!0,success:function(a){vl_is_ajax_call_success(a)?e(a.result_regions):vl_show_ajax_response_data_errors(a,"do geo search failed");var b="<iframe id='iframe-map' src='/mpq/map' seamless='seamless' height='100%' width='100%;' overflow:'hidden' frameborder='0' scrolling='no' allowtransparency='true'></iframe>";document.getElementById("region-links").innerHTML="",document.getElementById("region-links").innerHTML=b},error:function(a,b,c){vl_show_jquery_ajax_error(a,b,c)}}).responseText}else k()}else alert("Geocode was not successful for the following reason: "+d)})}}}function i(){document.getElementById("region-links").innerHTML="";var a="<iframe id='iframe-map' src='/mpq/map' seamless='seamless' height='100%' width='100%;' overflow:'hidden' frameborder='0' scrolling='no' allowtransparency='true'></iframe>";document.getElementById("region-links").innerHTML=a}function j(){a("#map_loading_image").show("fast"),a("#region-links").fadeTo(200,0)}function k(){a("#map_loading_image").hide("fast"),a("#region-links").fadeTo(200,1)}function l(a){var b="";if(a.landing_page&&(b+="<tr><td>Landing Page:</td>\n<td>"+a.landing_page+"</td></tr>"),b+="<tr><td>Creative Assets:</td>\n<td>",a.creative_files&&a.creative_files.length>0)for(key in a.creative_files){var c=a.creative_files[key],d=c.name||c[1];b+=d.substring(7)+"<br/>"}else b+='<span class="label label"> None specified</span>';if(b+="</td>\n</tr>",b+="<tr><td>Storyboard:</td>\n<td>",a.scenes.length>0)if("object"==typeof a.scenes)for(key in a.scenes){var e=a.scenes[key],f=parseInt(key,10)+1;b+='<span class="label" style="font-size:x-small"><small >'+f+"</small></span> "+e+"<br>"}else"string"==typeof a.scenes&&(b+='<span class="label" style="font-size:x-small"><small >1</small></span> '+a.scenes+"<br>");else b+='<span class="label label"> None specified</span>';return b+="</td>\n</tr>",b+="<tr><td>Video:</td>\n<td>",a.is_video?(b+=""!==a.features_video_youtube_url?'<span class="muted" ><i class="icon-youtube-play"></i>  </span><a href="'+a.features_video_youtube_url+'" target="_blank">'+a.features_video_youtube_url+"</a><br>":"",b+=a.features_video_video_play?'<span class="muted" style="color:#999999">video play: </span>'+a.features_video_video_play.replace("_"," ")+"<br>":"",b+=a.features_video_mobile_clickthrough_to?'<span class="muted" style="color:#999999">mobile click-through: </span>'+a.features_video_mobile_clickthrough_to.replace("_"," ")+"<br>":""):b+='<span class="label label"> None specified</span>',b+="</td>\n</tr>",b+="<tr><td>Map:</td>\n<td>",b+=a.is_map?""!==a.features_map_locations?'<span class="muted" style="color:#999999">Map Locations: </span>'+a.features_map_locations+"<br>":"":'<span class="label label"> None specified</span>',b+="</td>\n</tr>",b+="<tr><td>Social:</td>\n<td>",a.is_social?(b+=""!==a.features_social_twitter_text?'<span class="muted" style="color:#999999">Twitter Text: </span>'+a.features_social_twitter_text+"<br>":"",b+=""!==a.features_social_email_subject?'<span class="muted" style="color:#999999">Email Subject: </span>'+a.features_social_email_subject+"<br>":"",b+=""!==a.features_social_email_message?'<span class="muted" style="color:#999999">Email Message: </span>'+a.features_social_email_message+"<br>":"",b+=""!==a.features_social_linkedin_subject?'<span class="muted" style="color:#999999">LinkedIn Subject: </span>'+a.features_social_linkedin_subject+"<br>":"",b+=""!==a.features_social_linkedin_message?'<span class="muted" style="color:#999999">LinkedIn Message: </span>'+a.features_social_linkedin_message+"<br>":""):b+='<span class="label label"> None specified</span>',b+="</td>\n</tr>"}function m(b,c){b?a(c).show(200):a(c).hide(200)}function n(){for(var b=new Array("gender_male_demographic","gender_female_demographic","age_under_18_demographic","age_18_to_24_demographic","age_25_to_34_demographic","age_35_to_44_demographic","age_45_to_54_demographic","age_55_to_64_demographic","age_over_65_demographic","income_under_50k_demographic","income_50k_to_100k_demographic","income_100k_to_150k_demographic","income_over_150k_demographic","education_no_college_demographic","education_college_demographic","education_grad_school_demographic","parent_no_kids_demographic","parent_has_kids_demographic"),c="",d=b.length,e=d-1,f=0;d>f;f++){var g=b[f],h=a("#"+g).is(":checked");c+=h?"1":"0",c+=f==e?"":M}return c}function o(){var a="";return a+="1_1_1_1_1"+M+M+"All"+M+"Force include sites here..."}function p(){var a="";return a+=n(),a+=M+o()}function q(){var b=a("#iab_contextual_multiselect").select2("val");return JSON.stringify(b)}function r(){a("#iab_contextual_multiselect").select2({placeholder:"Select custom contextual channels",minimumInputLength:0,multiple:!0,ajax:{url:"/mpq_v2/get_contextual_iab_categories/",type:"POST",dataType:"json",data:function(a,b){return a="undefined"==typeof a||""==a?"%":a,{q:a,page_limit:10,page:b}},results:function(a){return{results:a.result,more:a.more}}},allowClear:!0})}function s(){var b=a("#industry_select").select2("val");return JSON.stringify(b)}function t(){a("#industry_select").select2({placeholder:"Select Advertiser Industry",minimumInputLength:0,multiple:!1,ajax:{url:"/mpq_v2/get_industries/",type:"POST",dataType:"json",data:function(a,b){return a="undefined"==typeof a||""==a?"%":a,{q:a,page_limit:20,page:b}},results:function(a){return{results:a.result,more:a.more}}},allowClear:!0})}function u(){a("#custom_regions_multiselect").select2({placeholder:"Start typing to find regions...",minimumInputLength:2,multiple:!0,ajax:{url:"/mpq_v2/get_custom_regions/",type:"POST",dataType:"json",data:function(a,b){return a="undefined"==typeof a||""==a?"%":a,{q:a,page_limit:10,page:b}},results:function(a){return{results:a.result,more:a.more}}},allowClear:!0})}function v(){var b=!1,c=a(".mpq_options_tab.active").attr("id");switch(c){case"dollar_tab":b=get_proposal_budget_options_data("dollar");break;case"impressions_tab":b=get_proposal_budget_options_data("impression");break;default:vl_show_error_html("Unknown active options budget tab: "+c)}return b}function w(){a(".chardinjs-overlay").css("filter","alpha(opacity=80)"),a(".chardinjs-overlay").on("click",function(a){x()})}function x(){a(".intro-chardin").each(function(b,c){a(this).removeAttr("data-intro"),a(this).removeAttr("data-position"),a(this).css("background-color","")})}function y(){"agency"===a("#role_dropdown").val()?a("#agency_website_control").parent().show():a("#agency_website_control").parent().hide()}function z(){var b=new Object;return b.business_name=a("#advertiser_business_name_input").val(),b.website_url=a("#advertiser_website_url_input").val(),b}function A(){var b=new Object;return b.name=a("#requester_name_input").val(),b.role=a("#role_dropdown").val(),b.website=a("#agency_website_input").val(),b.email_address=a("#requester_email_address_input").val(),b.phone_number=a("#requester_phone_number_input").val(),b.notes=a("#submission_notes_textarea").val(),b}function B(a,b){return D(a,b),a.is_valid}function C(b,c){var d=!1,e=!1;if(b.is_valid===!0){var f=v();d=JSON.stringify(f);var g=p(),h=q(),i=z(),j=JSON.stringify(i),k=A(),l=JSON.stringify(k),m=null,n=s();m=process_banner_intake(),"object"==typeof m.creative_files?(m.scenes=[""],m.requester_email=a('input[name="requester_email"]').val(),m.requester_id=a('input[name="requester_id"]').val()):m=null;var o=k.email_address,r={demographics:g,options_json:d,insertion_order_json:e,channels:h,advertiser_json:j,requester_json:l,referrer_json:o,banner_intake_fields:m,industry_id:n};a.ajax({url:"/mpq/submit_mpq",dataType:"json",success:function(b,c,d){b.was_geo_empty?I("Please select at least one region."):vl_is_ajax_call_success(b)?(a("#submit_modal").hide(),a("body").append('<form action="/embed/proposal/summary" name="mpq_is_submitted" method="post" style="display:none;"><input id="mpq_is_submitted_json_input" type="text" name="submitted_data" value="" /><input id="cc_email" type="text" name="cc_email" value="" /><input id="insertion_order_id" name="insertion_order_id"/></form>'),a("#mpq_is_submitted_json_input").val(JSON.stringify(b.submit_data)),a('input[name="proposal_id"').val(b.proposal_id),a("#cc_email").val(o),document.forms.mpq_is_submitted.submit()):vl_show_ajax_response_data_errors(b,"submitting mpq data failed")},error:function(a,b,c){vl_show_jquery_ajax_error(a,b,c)},async:!0,type:"POST",data:r})}else J(c)}function D(a,b){E(a,b),option_data={},F(a,b,option_data)}function E(b,c){var d="",e=window.location.pathname.split("/");4==e.length&&(d=e[3]),a.ajax({url:"/mpq/check_mpq_session",dataType:"json",async:!1,type:"POST",data:{referrer_email:d},success:function(a,d,e){vl_is_ajax_call_success(a)?a.has_session_data||(b.is_valid=!1,c.selected_regions={},c.selected_regions.error_text="Please select at least one region.",c.selected_regions.error_visibility_id="geo_error_div",c.selected_regions.error_content_id="geo_error_text"):vl_show_ajax_response_data_errors(a,"Something went wrong: ")},error:function(a,b,c){vl_show_jquery_ajax_error(a,b,c)}})}function F(b,c,d){if(c.options_form={},c.options_form.error_visibility_id="options_error_box",c.options_form.error_content_id="options_error_text",c.options_form.error_text="",a("#dollar_tab").is(":visible"))if(a("#dollar_budget_range_div").is(":visible"))b.is_valid=!1,c.dollar_budget_numbers={},c.dollar_budget_numbers.error_visibility_id="budget_range_selection_error_box",c.dollar_budget_numbers.error_content_id="budget_range_selection_error_text",c.dollar_budget_numbers.error_text="Please select a budget range<br>";else if(a("#dollar_budget_options_div").is(":visible")){c.dollar_budget_numbers={},c.dollar_budget_numbers.error_visibility_id="dollar_budget_number_error_box",c.dollar_budget_numbers.error_content_id="dollar_budget_number_error_text",c.dollar_budget_numbers.error_text="";var e=1;a("#dollar_budget_options_list").children("form.mpq_option").each(function(){G(b,c.options_form,a(this).find(".mpq_option_amount").val())||(b.is_valid=!1,c.dollar_budget_numbers.error_text+="Please enter a valid budget for option "+e.toString()+"<br>"),e++}),1==e&&(b.is_valid=!1,c.option_selection={},c.option_selection.error_visibility_id="dollar_budget_number_error_box",c.option_selection.error_content_id="dollar_budget_number_error_text",c.option_selection.error_text="Please select at least one option.")}else b.is_valid=!1,c.options_form.error_text+="Options form critical error: budget form display error.<br>";else if(a("#impressions_tab").is(":visible")){c.impression_budget_numbers={},c.impression_budget_numbers.error_visibility_id="impressions_budget_number_error_box",c.impression_budget_numbers.error_content_id="impressions_budget_number_error_text",c.impression_budget_numbers.error_text="";var e=1;a("#impression_budget_options_list").children("form.mpq_option").each(function(){H(b,c.options_form,a(this).find(".mpq_option_amount").val())||(b.is_valid=!1,c.impression_budget_numbers.error_text+="Please enter a valid impression amount for option "+e.toString()+"<br>"),e++}),1==e&&(b.is_valid=!1,c.option_selection={},c.option_selection.error_visibility_id="dollar_budget_number_error_box",c.option_selection.error_content_id="dollar_budget_number_error_text",c.option_selection.error_text="Please select at least one option.")}else b.is_valid=!1,c.options_form.error_text+="Options form critical error: unable to detect option form.<br>"}function G(a,b,c){var d=new RegExp(/^[1-9]([0-9]+)$/);return d.test(c)?!0:!1}function H(a,b,c){var d=new RegExp(/^[1-9][0-9][0-9]([0-9]+)$/);return d.test(c)?!0:!1}function I(b){a("#geo_error_text").html(b),a("#geo_error_div").show(),a(window).scrollTop(a("#geo_error_div").offset())}function J(b){var c={};c.offset_top=Number.MAX_VALUE;var d=20;a.each(b,function(){if(""!=this.error_text){var b=this.error_visibility_id,d=this.error_content_id,e=this.error_text;a("#"+b).show(),a("#"+d).html(e);var f=a("#"+b).offset();f.top<c.offset_top&&(c.offset_top=f.top,c.error_box=a("#"+b))}}),a(window).scrollTop(c.error_box.offset().top-a(".navbar").height()-d)}google.load("visualization","1",{packages:["corechart"]}),google.load("visualization","1",{packages:["table"]}),google.load("visualization","1",{packages:["map"]});var K=new google.maps.Geocoder;window.update_zip_set=function(a,d){var f=c();if("remove_zipcode"==a)for(var g=0;g<f.length;g++)d==f[g]&&(f.splice(g,1),g--);else if("add_zipcode"==a){for(var h=!1,i=f.length,g=0;i>g;g++)if(d==f[g]){h=!0;break}h||f.push(d)}b(),e(f)},a("input#radius, input#address").keypress(function(a){var b=a.keyCode||a.which,c=13;b==c&&h()}),a("#searchbut").on("click",function(){h()}),i(),a("input, textarea").placeholder(),a("#set_zips").removeClass("placeholder");var L=a("#io_wizard").wizard();L.on("change",function(b,c){validate_wizard(a(this).data("wizard").currentStep)||"next"!=c.direction||b.preventDefault()}),L.on("stepclick",function(){a("#io_wizard .actions button.btn-next").prop("disabled",!1)}),L.on("changed",function(b){4==a(this).data("wizard").currentStep&&L.trigger("finished")}),L.on("finished",function(b){var c=process_banner_intake();a("#creative_request_summary").html(l(c)),a("#io_wizard .actions button.btn-next").prop("disabled","disabled"),a('input[name="is_form_complete"]').val("true")}),a('select[name="handle_creative_request"]').on("change",function(b){b.preventDefault();var c=a(this).val();return a("#"+c).hasClass("active")?!1:(a(".handle_creative.active").removeClass("active").fadeOut(100,function(){a("#"+c).fadeIn(200).addClass("active")}),void a("#advertiser_business_name_input, #advertiser_website_url_input").val(""))}),a(document).bind("drop dragover",function(a){a.preventDefault()}),a("#cta_select").on("change",function(){m("other"==a(this).val(),"#other_cta_text")}),m("other"==a("#cta_select").val(),"#other_cta_text"),a("#is_video").on("click",function(){m(a(this).is(":checked"),"#video_details")}),a("#is_map").on("click",function(){m(a(this).is(":checked"),"#map_details")}),a("#is_social").on("click",function(){m(a(this).is(":checked"),"#social_details")});var M="_";a("#custom_regions_multiselect_load_button").click(function(){var b=a("#custom_regions_multiselect").val();a.ajax({async:!0,type:"POST",url:"/mpq_v2/get_zips_from_selected_regions_and_save",data:{custom_region_ids:b},dataType:"json",success:function(b){var c="";0==b.error?(a.each(b.response,function(a,b){""!=c&&(c+=","),c+=b.regions}),a("#set_zips").val(c),f("custom_regions")):alert("Server Error: "+b.error_text+" (#0831998)")},error:function(a){alert("Error 113466: Failed to retrieve desired custom regions")}})}),a(".channel_checkbox").change(function(){if(a(this).is(":checked")){var b=!0;a(".channel_checkbox").each(function(){return a(this).is(":checked")?void 0:void(b=!1)}),1==b&&a("#select_all_contextual_checkbox").prop("checked",!0)}else a("#select_all_contextual_checkbox").prop("checked",!1)});window.period_change=function(b){-1==b?(a("#flight_term_picker").hide(),a("#end_date_picker").show()):(a("#flight_term_picker").show(),a("#end_date_picker").hide())},window.flight_term_change=function(b){0==b?(a("#end_date_field").show(),a("#literally_just_the_word_months").hide()):(a("#end_date_field").hide(),-1!=b?a("#literally_just_the_word_months").show():a("#literally_just_the_word_months").hide())},a("#geo_tab_help_button").on("click",function(){a("#custom_regions_pill").attr("data-intro","If you know the name of your regions (city, county or metro area) use this feature"),a("#custom_regions_pill").attr("data-position","left"),a("#custom_regions_pill").css("background-color","white"),a("#radius_search_pill").attr("data-intro",'Use the "Radius Search" feature to target all the zip codes within a certain distance from your location...'),a("#radius_search_pill").attr("data-position","bottom"),a("#radius_search_pill").css("background-color","white"),a("#known_zips_pill").attr("data-intro",'...or, if you know your target zip codes you can specify them after clicking the "Known Zips" tab'),a("#known_zips_pill").attr("data-position","right"),a("#known_zips_pill").css("background-color","white"),a("body").chardinJs("start"),w()}),a("#geo_search_help_button").on("click",function(){a("#radius_span").attr("data-intro","Specify the number of miles around your location that you'd like to target here"),a("#radius_span").attr("data-position","bottom"),a("#address").attr("data-intro","Specify your location here. You can use an address, zip code, city or even a landmark."),a("#address").attr("data-position","right"),a("body").chardinJs("start"),w()}),a("#demo_targeting_help_button").on("click",function(){a("#hhi_checkboxes").attr("data-intro","The Household Income demographic refers to the total annual income per household"),a("#hhi_checkboxes").attr("data-position","left"),a("#hhi_checkboxes").css("background-color","white"),a("#ed_checkboxes").attr("data-intro",'The Education demographic refers to the highest level of education acheived by the target audience. For example, "College" would include audiences with at least a college degree.'),a("#ed_checkboxes").attr("data-position","right"),a("#ed_checkboxes").css("background-color","white"),a("body").chardinJs("start"),w()}),a("#media_targeting_help_button").on("click",function(){a("#media_targeting_section").attr("data-intro",'<div style="width:500px">Most sites on the internet have content that can be categorized according to these channels. You should select contextual channels that: <br>1) Match the advertiser\'s offering and <br>2) Match the advertiser\'s audience\'s interests. <br>For example, a car dealership who tends to sell their cars to sports enthusiasts should target both the "Automotive" and "Sports" contextual channels.</div>'),a("#media_targeting_section").attr("data-position","bottom"),a("#media_targeting_section").css("background-color","white"),a("body").chardinJs("start"),w()}),a("#custom_regions_load_button").on("click",function(b){var c="";a("#custom_regions > option:selected").each(function(){c+=a(this).data("polygons")+","}),a("#set_zips").val(c),a("#set_zips").html(c),f(!0),a("#known_zips_tab_anchor").tab("show")}),a("#known_zips_load_button").on("click",function(a){f(a)}),a("#custom_regions_abandon_changes").on("click",function(b){a("#known_zips_tab_anchor").tab("show")});var N=0,O="/banner_intake/creative_files_upload";a("#file_upload").fileupload({url:O,type:"POST",dataType:"json",add:function(b,c){c.el=a('<div class="file row" data-file="'+c.files[0].name+'"/>'),a("#files").append(c.el),a(c.el).html('<label class="control-label" style="font-size:0.85em;">'+c.files[0].name.substr(0,20)+'...</label><div class="progress progress-success progress-striped active span6"><div class="bar"></div></div>'),c.submit(),a("#main_files_alert").removeClass("alert-success").addClass("alert-info").html("<b>Heads Up!</b> Your files are currently in the process of uploading. Please do not refresh or close your browser window until the uploads are complete.")},progress:function(b,c){var d=parseInt(c.loaded/c.total*100,10);a(c.el).find(".progress .bar").css("width",d+"%").text("Uploading "+d+"% of "+Math.floor(c.total/1024)+"kb..."),100==d&&a(c.el).find(".progress .bar").text("Processing "+c.files[0].name+"...")},fail:function(b,c){a(c.el).html('<div class="alert alert-danger">'+c.files[0].name+" failed to upload!</div>")},done:function(b,c){var d=c.result;N++;var e='<div style="margin-left: 20px;"><b>'+d.data.Key.substr(7)+'</b> <button class="btn btn-danger btn-mini delete_file" data-bucket="'+d.data.Bucket+'" data-name="'+d.data.Key+'"><span class="icon icon-remove"></span></button></div>';e+='<input type="hidden" name="creative_files['+N+']" value="'+d.response.ObjectURL+'"/>',e+='<input type="hidden" name="creative_files['+N+']" value="'+d.data.Key+'"/>',e+='<input type="hidden" name="creative_files['+N+']" value="'+d.data.Bucket+'"/>',e+='<input type="hidden" name="creative_files['+N+']" value="'+d.data.ContentType+'"/>',a(c.el).html(e),a("#main_files_alert").removeClass("alert-info").addClass("alert-success").html("<b>Your files have finished uploading!</b> You still need to hit 'Submit' at the bottom of this page to save your files.")}}).prop("disabled",!a.support.fileInput).parent().addClass(a.support.fileInput?void 0:"disabled"),a(document).on("click","button.delete_file",function(b){b.preventDefault();var c=a(this).closest("div.file");return c.animate({opacity:.5},200),a.ajax({url:"/banner_intake/creative_files_delete",type:"POST",data:{name:a(this).data("name"),bucket:a(this).data("bucket")},success:function(a,b){c.fadeOut(200),c.remove()},error:function(a,b){c.fadeOut(200),c.remove()}}),!1}),process_banner_intake=function(){var b={},c=a("#creative_new_request").find("input, textarea").serializeArray();a.each(c,function(){b[this.name]?(b[this.name].push||(b[this.name]=[b[this.name]]),b[this.name].push(this.value||"")):b[this.name]=this.value||""});var d=new RegExp(/\[.+\]/),e=new RegExp(/\[\]/);for(var f in b)if(f.match(d)){var g=f.replace(d,"");"object"==typeof b[g]?(b[g].push(b[f]),delete b[f]):(b[g]=[b[f]],delete b[f])}else if(f.match(e)){var g=f.replace(e,"");b[g]="string"==typeof b[f]?[b[f]]:b[f],delete b[f]}return b},a(".tool_poppers").popover(),r(),t(),u(),a("#datetimepicker1").datetimepicker({pickTime:!1,maskInput:!0}),a("#datetimepicker2").datetimepicker({pickTime:!1,maskInput:!0}),a("#datetimepicker3").datetimepicker({pickTime:!1,maskInput:!0}),a("#end_date_picker").hide(),a("#end_date_field").hide(),a("#literally_just_the_word_months").hide(),a("#role_dropdown").change(function(){y()}),a("#proposal_submit_button, #insertion_order_submit_button").click(function(){a(".mpq_error_box").hide(),a("#geo_error_div").hide();var b={};b.is_valid=!0;var c={};B(b,c)?C(b,c):J(c)}),y(),a("input[type=text]").click(function(){this.select()}),a("#welcome_modal").modal("show")}(jQuery);